<h1>Speaker Wire Calculator</h1>
<br><br>

<div id='main_description'>
  <strong style='color: #80879D;'>
    Speaker Wire Calculator is a web app designed to calculte the optimal
    gauge of speaker wire or cable needed to achieve a specific standard of
    quality given the following parameters: Application* , Nominal
    Impedance or Ohms(Ω), and the total distance of the run in feet.
    <br><br>
    *The application parameter is used to calculate your speakers wire resistance
    to be within a specific range of it's nominal impedance.
    <table class='table table-bordered'>
      <tr>
        <th>Application</th>
        <th>% of Speakers Nominal Impedance</td>
      </tr>
      <tr>
        <td>Audiophile</td>
        <td>< 3%</td>
      </tr>
      <tr>
        <td>Critical Listening</td>
        <td>< 4.5%</td>
      </tr>
      <tr>
        <td>Casual Listening</td>
        <td>< 7.5%</td>
      </tr>
      <tr>
        <td>Audio Distribution</td>
        <td>< 9%</td>
      </tr>
    </table>
  </strong>
</div>

<div ng-controller='calculator' ng-app id='width_fix'>
  <center>
    <div class="panel panel-default" style='width: 75%;'>
      <br>
      <form novalidate class='css-form'>
        <div class='row'>
          <div class='col-md-4 col-sm-12'>
            Application
            <select ng-model='indexId'
                    ng-options='quality.IndexId as quality.IndexName for quality in qualityIndex'
                    style='width: 150px;'>
            </select>
          </div>
          <div class='visible-xs'><br><br></div>
          <div class='col-md-4 col-sm-12'>
            Ohms(Ω)
            <input type='number' min='1', step='1' pattern="\d+"
                   ng-model='ohms' placeholder='i.e. 4ohms'
                   style='width: 150px;'/>
          </div>
          <div class='visible-xs'><br><br></div>
          <div class='col-md-4 col-sm-12'>
            Distance(ft)
            <input type='number' min='1', step='1' pattern="\d+"
                   ng-model='feet' placeholder='i.e. 20ft'
                   style='width: 150px;'/>
          </div>
        </div>
      </form>
      <br>
    </div>

    <button input type='button' class='btn btn-default' ng-click='calculateScore()'>
      Calculate Gauge
    </button>

    <br><br>

    <div class='panel panel-default' style='width: 75%;'>
      <div class='panel-body' style='text-align:left;'>
        <div ng-show='isCalculated'>
        You need <b>{{gauge}}AWG speaker wire.</b>
        Below are some recomendations.</br></br>
        </div>
        <div ng-hide='isCalculated'>
          Please select an application for your project and enter the olms and
          run length for your run to calculate the correct optimal gauge.
        </div>

       <div ng-if='gauge == 10'>
        <%= link_to(@url_10 , 'Wired Home SKRL-10-100 10 AWG OFC Speaker Wire 100 ft.') %></br>
        <%= link_to(image_tag("/assets/wired_home.jpg", height: '150px;',
                              alt: '10AWG Cable'), @URL_10) %></br>
        </div>

       <div ng-if='gauge == 12'>
        <%= link_to(@url_12 , 'Wired Home SKRL-12-100 12 AWG OFC Speaker Wire 100 ft.') %></br>
        <%= link_to(image_tag("/assets/wired_home.jpg", height: '150px;',
                               alt: '12AWG Cable'), @URL_12) %></br>
        </div>

       <div ng-if='gauge == 14'>
        <%= link_to(@url_14 , 'Wired Home SKRL-14-100 14 AWG OFC Speaker Wire 100 ft.') %></br>
        <%= link_to(image_tag("/assets/wired_home.jpg", height: '150px;',
                               alt: '14AWG Cable'), @URL_14) %></br>
        </div>

       <div ng-if='gauge == 16'>
        <%= link_to(@url_16 , 'Wired Home SKRL-16-100 16 AWG OFC Speaker Wire 100 ft.') %></br>
        <%= link_to(image_tag("/assets/wired_home.jpg", height: '150px;',
                               alt: '15AWG Cable'), @URL_16) %></br>
        </div>

       <div ng-if='gauge == 18'>
        <%= link_to(@url_18 , 'RCA AH18100SR 18 AWG Speaker Wire 100 ft.') %></br>
        <%= link_to(image_tag("/assets/rca.jpg", height: '150px;',
                               alt: '18AWG Cable'), @URL_18) %></br>
        </div>
      </div>
    </div>
  </center>
</div>

<script>
  function calculator($scope) {
    // Set Variables
    $scope.gauge = null;
    $scope.feet = null;
    $scope.ohms = null;
    $scope.score = 0;
    $scope.indexId = 300;
    $scope.isCalculated = false;

    // Application
    $scope.qualityIndex = [
        {IndexId : 50, IndexName : 'Audiophile' },
        {IndexId : 100, IndexName : 'Critical Listening' },
        {IndexId : 200, IndexName : 'Casual Listening' },
        {IndexId : 300, IndexName : 'Audio Distribution' }
    ];

    // Calculate Score based on parameters
    $scope.calculateScore = function() {
      $scope.score = ( $scope.indexId * $scope.ohms ) / $scope.feet
      $scope.isCalculated = true;
      $scope.calculateGauge()
    };

    $scope.calculateGauge = function () {
      if ($scope.score < 11) {
        $scope.gauge = 10;
      } else if ($scope.score >= 11 && $scope.score < 17) {
        $scope.gauge = 12;
      }  else if ($scope.score >= 17 && $scope.score < 25) {
        $scope.gauge = 14;
      } else if ($scope.score >= 25 && $scope.score < 37) {
        $scope.gauge = 16;
      } else if ($scope.score >=37) {
        $scope.gauge = 18;
      } else {
        $scope.gauge = null;
      }
    };
  };
</script>

<%= render 'generator/google_analytics' %>
